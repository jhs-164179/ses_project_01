{% extends 'common/base2.html' %}   
{% load static %}

{% block title %}
글 쓰기             
{% endblock title %}

{% block body %}

<script>
    function board_register() {
        let title_name = document.getElementById("title").value;
        let contents = document.getElementById("content").value;
        if (title_name == "" || title_name == " " || title_name.replaceAll(" ", "") == "" ||
        contents == "" || contents == " " || contents.replaceAll(" ", "") == "") {
            alert("제목이나 내용이 공백인 글은 등록할 수 없습니다.")
            return false;
        } else {
            if(confirm("정말로 이 글을 작성하시겠습니까?")) {
                document.getElementById("board_write").submit();
            } else {
            
            }
        }
    }

    function search() { //검색어 입력 후 이동하는 기능 구현
        let input_word = document.getElementById("s_input").value; // 입력된 값을 문자열로 변환
		let pro_chr = [' ', '!', '@', '#', '$', '%', '^', '&', '*', '+', '-', '=', ':', ";", "/", "`", "~"];
		for (let i = 0; i < pro_chr.length; i++) {
			input_word = input_word.replaceAll(pro_chr[i], ''); // 특수 문자 검색 차단 (엉뚱한 결과가 나오는 것 방지)
		}
		// || input_word == " " || input_word.replaceAll(" ", "") == ""
		if (input_word == "" || input_word == " " || input_word.replaceAll(" ", "") == "") { //검색어가 없거나 공백이거나 공백만 있을 경우
            alert('올바른 검색어를 입력해 주세요.\r\n공백 혹은 일부 특수문자는 사용이 불가능합니다.'); // \r\n 줄바꿈 시퀀스 사용
            return false;
        }
		// href로 했더니 안되서 assign 사용하여 이동
		// ?page=1&searchType=&searchWord=  <-- 이 부분은 불가피한 하드 코딩임
		window.location.assign("{% url 'board:free' %}?page=1&searchType=&searchWord=" + input_word); //보드 게시판 검색 기능으로 이동
    }

</script>


<style>

</style>
<div class="h2 text-primary">자유게시판 글 작성</div>
<hr>
    <form id = "board_write" action = "{% url 'board:register' %}" method="post">
        {% csrf_token %}
        <!-- {{ form.as_p }} -->
        <div>
            <input type="text" placeholder="제목을 입력하세요." id="title" name="title" style="width: 900px; height: 40px; margin: 0px 0px 15px 0px;"></input>
        </div>
        <div>
            <textarea id="content" placeholder="내용을 입력하세요." name="content" style= "width: 900px; height: 420px; margin-bottom: 10px; resize: none;"></textarea>
        </div>
        <div style="margin:100px 0px 0px20px;">
        <a href="{% url 'board:free' %}" class="btn btn-primary" >뒤로</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <input type="button" id = "registerForm" class="btn btn-primary" value="등록" onclick="board_register();">
        </div>
    </form>
{% endblock body %}

